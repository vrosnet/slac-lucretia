<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <title>Lucretia: Other Useful Stuff: Deck Parsing</title>
  <meta name="author" content="Peter Tenenbaum">
</head>
<body>
<div style="text-align: center;"><a href="http://www.slac.stanford.edu/accel/ilc/codes/Lucretia/"><span
 style="font-size: 24pt;"><img hspace="20" align="right"
 style="border: 0px solid ; width: 80px; height: 90px;"
 alt="LucretiaLogo" title="Lucretia home page" src="LucretiaLogo.gif"></span></a><span
 style="font-size: 24pt;"><br>
</span>
<div style="text-align: center;"><span style="font-size: 24pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
The <span style="color: rgb(214, 0, 147);">LUCRETIA</span>
Project</span><br>
</div>
<span style="font-size: 24pt;"><br>
<small>Other Useful Stuff:&nbsp; Deck Parsing<br>
<br>
</small></span></div>
In principle, the problem of parsing a deck is completely separate from
the problems of performing simulations once the beamline has been
instantiated in the simulation code.&nbsp; This is especially true in
Lucretia, where you could imagine using the <a
 href="lattice_generation.html">lattice generation</a> functions and
some additional scripts to generate the Lucretia lattice of a beamline
in Matlab without ever having to refer to an existing deck file.&nbsp;
This means that if a coder wants to declare, "Parsing the deck is not
my problem and not my job," they are free to do so.<br>
<br>
Unfortunately, in the practical world of accelerators it is generally
the case that the "accepted" or "production" lattice of a given
accelerator is a particular deckfile stored on a server somewhere; that
we need to exchange these files between the users of different
simulation codes; that lattice design programs such as MAD generally
use some form of deckfile, and since the design program is the one used
first, to design the lattice, the language standard used by the design
program generally becomes the de facto language standard used to
describe a given accelerator for all time.&nbsp; <br>
<br>
This is a rather long-winded way of saying that deck parsing will
likely be with us for some time whether we like it or not, and
therefore that declaring that deck parsing is "somebody else's problem"
is a self-indulgent and untenable attitude for the code-writer.<br>
<br>
Lucretia does not have any "native" deck parser or language, but it
does provide a tool for parsing the Extended Standard Input Format, and
that tool is the function <a
 href="lattice_generation.html#XSIFToLucretia">XSIFToLucretia</a>.&nbsp;
XSIFToLucretia, in turn, makes use of <a
 href="http://www.slac.stanford.edu/accel/ilc/codes/xsif/mex/XSIFParse.m">XSIFParse</a>,
a mex-ed version of the XSIF parsing library (written in
Fortran-90).&nbsp; Since parsing is a chore that will be with us for
the foreseeable future (and since I am both the author of Lucretia and
one of the designated maintainers of the XSIF library), I have made
mex-ed versions of both <a
 href="http://www.slac.stanford.edu/accel/ilc/codes/xsif/mex/XSIFParse.m">XSIFParse</a>
and <a
 href="http://www.slac.stanford.edu/accel/ilc/codes/xsif/mex/GetXSIFDictionary.m">GetXSIFDictionary</a>
for all the supported
Lucretia platforms, and these tools can be obtained from the <a
 href="downloads.html">Downloads</a> page.<br>
<br>
In the future, it is possible that either a standalone parser of the
MAD-X language will become available, or that a <a
 href="http://www.lns.cornell.edu/%7Edcs/aml/">much more ambitious
parser</a> (which can manage XSIF, MAD-X, and a new XML-based
accelerator description language) will be released.&nbsp; In due time,
I will provide mex-ed versions of these new tools and Lucretia scripts
to drive them (the benefit of not having a native accelerator language
in your code is that you can more easily accomodate several different
standards on an equal footing).<br>
<br>
You're welcome.<br>
<br>
<br>
<a href="http://www.slac.stanford.edu/owner/quarkpt">quarkpt</a><br>
23-Apr-2005<br>
<a href="http://www.slac.stanford.edu/detailed.html"><img
 src="SLAC_whitebkgd.jpg" title="Return to SLAC Detailed Home Page"
 alt="SLAC-logo" style="border: 0px solid ; width: 100px; height: 39px;"
 align="right"></a><br>
</body>
</html>
